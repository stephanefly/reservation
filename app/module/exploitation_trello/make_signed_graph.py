import pandas as pd
from django.db.models import Q
from app.models import Event

def get_signed_data():
    events_with_products = Event.objects.filter(
        signer_at__isnull=False
    ).select_related(
        'client', 'event_product', 'event_details'
    ).values(
        'client__nom', 'prix_proposed', 'event_details__date_evenement',
        'event_product__photobooth', 'event_product__miroirbooth',
        'event_product__videobooth'
    )

    print(events_with_products)
    df = pd.DataFrame(events_with_products)
    print(df)
